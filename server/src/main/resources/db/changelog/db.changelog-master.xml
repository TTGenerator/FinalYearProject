<?xml version="1.0" encoding="UTF-8"?>

<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
         http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd">

    <changeSet id="1" author="jayani">

        <createTable tableName="Departments">
            <column name="dept_id" type="VARCHAR(50)">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="dept_name" type="VARCHAR(50)"></column>
        </createTable>

        <createTable tableName="students">
            <column name="student_id" type="VARCHAR(10)">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="student_name" type="VARCHAR(50)"></column>
            <column name="batch_id" type="VARCHAR(10)"></column>
            <column name="dept_id" type="VARCHAR(10)"></column>
            <column name="student_email" type="VARCHAR(40)"></column>
        </createTable>

        <createTable tableName="Admin">
            <column name="admin_id" type="VARCHAR(10)">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="admin_email" type="VARCHAR(50)"></column>
        </createTable>

        <createTable tableName="Lecturers">
            <column name="lecturer_id" type="VARCHAR(50)">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="lecturer_name" type="VARCHAR(100)"></column>
            <column name="lecturer_email" type="VARCHAR(40)"></column>
            <column name="dept_id" type="VARCHAR(50)"></column>
            <column name="has_preferences" type="BOOLEAN"></column>
        </createTable>

        <createTable tableName="Courses">
            <column name="course_code" type="VARCHAR(10)">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="course_name" type="VARCHAR(25)"></column>
            <column name="duration" type="BIGINT(6)"></column>
            <column name="is_active" type="BOOLEAN"></column>
            <column name="is_deleted" type="BOOLEAN"></column>
            <column name="lecturer_id" type="VARCHAR(50)"></column>
            <column name="max_students" type="INTEGER(10)"></column>
        </createTable>
        <createTable tableName="Classroom">
            <column name="room_id" type="VARCHAR(50)">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="room_name" type="VARCHAR(50)"></column>
            <column name="room_category" type="VARCHAR(50)"></column>
            <column name="capacity" type="BIGINT(50)"></column>
            <column name="is_active" type="BOOLEAN"></column>
            <column name="is_deleted" type="BOOLEAN"></column>
        </createTable>

        <createTable tableName="LecturerPreferences">
            <column name="lecturer_id" type="VARCHAR(50)">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="is_ac" type="BOOLEAN"></column>
            <column name="has_multimedia" type="BOOLEAN"></column>
            <column name="has_whiteboard" type=" BOOLEAN"></column>
        </createTable>

        <createTable tableName="Role">
            <column name="user_name" type="VARCHAR(50)">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="role" type="VARCHAR(50)"></column>
            <column name="password" type="VARCHAR(50)"></column>
        </createTable>

        <createTable tableName="RoomFacility">
            <column name="room_id" type="VARCHAR(50)">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="is_ac" type="BOOLEAN"></column>
            <column name="has_multimedia" type="BOOLEAN"></column>
            <column name="has_whiteboard" type="BOOLEAN"></column>
        </createTable>

        <!--Constraints fo Students entity-->
        <addForeignKeyConstraint baseColumnNames="dept_id"
                                 baseTableName="Students"
                                 constraintName="fk_students_dept_id"
                                 referencedColumnNames="dept_id"
                                 referencedTableName="Departments"/>

        <!--Constraints fo Lecturers entity-->
        <addForeignKeyConstraint baseColumnNames="dept_id"
                                 baseTableName="Lecturers"
                                 constraintName="fk_lecturers_dept_id"
                                 referencedColumnNames="dept_id"
                                 referencedTableName="Departments"/>

        <!--Constraints fo Courses entity-->
        <addForeignKeyConstraint baseColumnNames="lecturer_id"
                                 baseTableName="Courses"
                                 constraintName="fk_courses_lecturer_id"
                                 referencedColumnNames="lecturer_id"
                                 referencedTableName="Lecturers"/>

        <sql endDelimiter=";">
            <!--insert into person(id,firstname,lastname,age,version) values(1,'mourad','zouabi',32,0);-->
            INSERT INTO Admin VALUES ('admin1', 'admin1@pdn.ac.lk');
            INSERT INTO Admin VALUES ('admin2', 'admin2@pdn.ac.lk');
            INSERT INTO Admin VALUES ('admin3', 'admin3@pdn.ac.lk');
            INSERT INTO Admin VALUES ('admin4', 'admin4@pdn.ac.lk');
            INSERT INTO Admin VALUES ('admin5', 'admin5@pdn.ac.lk');

            INSERT INTO Classroom VALUES ('r2', 'room02', 'lecturehall', 150, true, false);
            INSERT INTO Classroom VALUES ('r3', 'room03', 'lecturehall', 150, true, false);
            INSERT INTO Classroom VALUES ('r7', 'room07', 'lecturehall', 300, true, false);
            INSERT INTO Classroom VALUES ('r8', 'room08', 'lecturehall', 300, true, false);
            INSERT INTO Classroom VALUES ('r9', 'room09', 'lecturehall', 320, true, false);
            INSERT INTO Classroom VALUES ('r10', 'room10', 'lecturehall', 320, true, false);
            INSERT INTO Classroom VALUES ('r11', 'room11', 'lecturehall', 320, true, false);
            INSERT INTO Classroom VALUES ('r12', 'room12', 'lecturehall', 105, true, false);
            INSERT INTO Classroom VALUES ('r13', 'room13', 'lecturehall', 44, true, false);
            INSERT INTO Classroom VALUES ('r14', 'room14', 'lecturehall', 80, true, false);
            INSERT INTO Classroom VALUES ('r15', 'room15', 'lecturehall', 45, true, false);
            INSERT INTO Classroom VALUES ('r16', 'room16', 'lecturehall', 45, true, false);
            INSERT INTO Classroom VALUES ('r17', 'room17', 'lecturehall', 45, true, false);
            INSERT INTO Classroom VALUES ('r18', 'room18', 'lecturehall', 62, true, false);
            INSERT INTO Classroom VALUES ('r19', 'room19', 'lecturehall', 105, true, false);
            INSERT INTO Classroom VALUES ('r20', 'room20', 'lecturehall', 37, true, false);
            INSERT INTO Classroom VALUES ('r21', 'room21', 'lecturehall', 104, true, false);
            INSERT INTO Classroom VALUES ('r23', 'room23', 'lecturehall', 150, false, false);
            INSERT INTO Classroom VALUES ('do1', 'drawing1', 'drawingoffice', 200, true, false);
            INSERT INTO Classroom VALUES ('do2', 'drawing2', 'drawingoffice', 200, true, false);

            INSERT INTO Departments VALUES ('d1', 'Chemical and Process Engineering');
            INSERT INTO Departments VALUES ('d2', 'Civil Engineering');
            INSERT INTO Departments VALUES ('d3', 'Computer Engineering');
            INSERT INTO Departments VALUES ('d4', 'Electrical and Electronic Engineering');
            INSERT INTO Departments VALUES ('d5', 'Engineering Management');
            INSERT INTO Departments VALUES ('d6', 'Engineering Mathematics');
            INSERT INTO Departments VALUES ('d7', 'Mechanical Engineering');
            INSERT INTO Departments VALUES ('d8', 'Production and Manufacturing Engineering');

            INSERT INTO Role VALUES ('admin1', 'admin', 'admin1');
            INSERT INTO Role VALUES ('lecturer1', 'lecturer', 'lecturer1');
            INSERT INTO Role VALUES ('student1', 'student', 'student1');

            INSERT INTO RoomFacility VALUES ('r2', false, true, false);
            INSERT INTO RoomFacility VALUES ('r3', false, true, false);

            INSERT INTO Lecturers VALUES ('lecturer1', 'lecturer1', 'lecturer1@pdn.ac.lk', 'd1', true);
            INSERT INTO Lecturers VALUES ('lecturer2', 'lecturer2', 'lecturer2@pdn.ac.lk', 'd2', true);
            INSERT INTO Lecturers VALUES ('lecturer3', 'lecturer3', 'lecturer3@pdn.ac.lk', 'd1', true);
            INSERT INTO Lecturers VALUES ('lecturer4', 'lecturer4', 'lecturer4@pdn.ac.lk', 'd1', true);
            INSERT INTO Lecturers VALUES ('lecturer5', 'lecturer5', 'lecturer5@pdn.ac.lk', 'd1', true);
            INSERT INTO Lecturers VALUES ('lecturer6', 'lecturer6', 'lecturer6@pdn.ac.lk', 'd1', true);

            INSERT INTO Courses VALUES ('GP101', 'English1', '2', true, false, 'lecturer1', 400);
            INSERT INTO Courses VALUES ('GP103', 'Mathematics1', '2', true, false, 'lecturer2', 400);
            INSERT INTO Courses VALUES ('GP109', 'Material Science', '2', true, false, 'lecturer3', 400);
            INSERT INTO Courses VALUES ('GP110', 'Engineering Mechanics', '2', true, false, 'lecturer4', 400);
            INSERT INTO Courses VALUES ('GP112', 'Engineering Measurements', '2', true, false, 'lecturer5', 400);
            INSERT INTO Courses VALUES ('GP114', 'Engineering Drawing', '2', true, false, 'lecturer6', 400);


        </sql>

    </changeSet>

</databaseChangeLog>